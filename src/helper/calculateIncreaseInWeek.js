import { convertTimestampToString } from "./convertTimestampToString";

export const totalUsersArray = [
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "akaditya394@gmail.com",
    name: "Aditya Kumar",
    timestamp: "February 1, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example1@gmail.com",
    name: "John Doe",
    timestamp: "February 2, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example2@gmail.com",
    name: "Jane Doe",
    timestamp: "February 3, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example3@gmail.com",
    name: "Alice Smith",
    timestamp: "February 4, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example4@gmail.com",
    name: "Bob Johnson",
    timestamp: "February 5, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example5@gmail.com",
    name: "Emily Brown",
    timestamp: "February 6, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example6@gmail.com",
    name: "David Lee",
    timestamp: "February 7, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example7@gmail.com",
    name: "Sophia Garcia",
    timestamp: "February 8, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example8@gmail.com",
    name: "Michael Martinez",
    timestamp: "February 9, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example9@gmail.com",
    name: "Olivia Rodriguez",
    timestamp: "February 10, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example10@gmail.com",
    name: "William Wilson",
    timestamp: "February 11, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example11@gmail.com",
    name: "Emma Anderson",
    timestamp: "February 12, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example12@gmail.com",
    name: "Daniel Taylor",
    timestamp: "February 1, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example13@gmail.com",
    name: "Ava Thomas",
    timestamp: "February 2, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example14@gmail.com",
    name: "James White",
    timestamp: "February 3, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example15@gmail.com",
    name: "Isabella Martinez",
    timestamp: "February 4, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example16@gmail.com",
    name: "Alexander Jackson",
    timestamp: "February 5, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example17@gmail.com",
    name: "Mia Harris",
    timestamp: "February 6, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example18@gmail.com",
    name: "Ethan Thompson",
    timestamp: "February 7, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example19@gmail.com",
    name: "Sophia Wright",
    timestamp: "February 8, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    batch: "2020-2024",
    degree: "B. Tech",
    email: "example20@gmail.com",
    name: "Benjamin Davis",
    timestamp: "February 9, 2024 at 11:00:00 AM UTC+5:30",
  },
];

export const totalResumesArray = [
  {
    email: "akaditya394@gmail.com",
    index: "1",
    jobTitle: "software developer",
    timestamp: "February 2, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example1@gmail.com",
    index: "2",
    jobTitle: "frontend developer",
    timestamp: "February 3, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example2@gmail.com",
    index: "3",
    jobTitle: "backend developer",
    timestamp: "February 4, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example3@gmail.com",
    index: "4",
    jobTitle: "data scientist",
    timestamp: "February 5, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example4@gmail.com",
    index: "5",
    jobTitle: "machine learning engineer",
    timestamp: "February 6, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example5@gmail.com",
    index: "6",
    jobTitle: "software engineer",
    timestamp: "February 7, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example6@gmail.com",
    index: "7",
    jobTitle: "systems analyst",
    timestamp: "February 8, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example7@gmail.com",
    index: "8",
    jobTitle: "web developer",
    timestamp: "February 9, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example8@gmail.com",
    index: "9",
    jobTitle: "devOps engineer",
    timestamp: "February 10, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example9@gmail.com",
    index: "10",
    jobTitle: "mobile app developer",
    timestamp: "February 11, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example10@gmail.com",
    index: "11",
    jobTitle: "UI/UX designer",
    timestamp: "February 12, 2024 at 10:00:00 AM UTC+5:30",
  },
  {
    email: "example11@gmail.com",
    index: "12",
    jobTitle: "network engineer",
    timestamp: "February 1, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example12@gmail.com",
    index: "13",
    jobTitle: "quality assurance engineer",
    timestamp: "February 2, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example13@gmail.com",
    index: "14",
    jobTitle: "cybersecurity analyst",
    timestamp: "February 3, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example14@gmail.com",
    index: "15",
    jobTitle: "database administrator",
    timestamp: "February 4, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example15@gmail.com",
    index: "16",
    jobTitle: "business analyst",
    timestamp: "February 5, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example16@gmail.com",
    index: "17",
    jobTitle: "project manager",
    timestamp: "February 6, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example17@gmail.com",
    index: "18",
    jobTitle: "software architect",
    timestamp: "February 7, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example18@gmail.com",
    index: "19",
    jobTitle: "data analyst",
    timestamp: "February 8, 2024 at 11:00:00 AM UTC+5:30",
  },
  {
    email: "example19@gmail.com",
    index: "20",
    jobTitle: "system administrator",
    timestamp: "February 9, 2024 at 11:00:00 AM UTC+5:30",
  },
];

export const totalActivitiesArray = [
  {
    activityId: "ACT001",
    activityType: "SIGNUP",
    description: "User Signed Up",
    timestamp: "February 1, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user1@gmail.com",
  },
  {
    activityId: "ACT002",
    activityType: "LOGIN",
    description: "User Logged In",
    timestamp: "February 2, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user2@gmail.com",
  },
  {
    activityId: "ACT003",
    activityType: "UPDATE_PROFILE",
    description: "User Profile Updated",
    timestamp: "February 3, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user3@gmail.com",
  },
  {
    activityId: "ACT004",
    activityType: "LOGOUT",
    description: "User Logged Out",
    timestamp: "February 4, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user4@gmail.com",
  },
  {
    activityId: "ACT005",
    activityType: "PURCHASE",
    description: "User Made a Purchase",
    timestamp: "February 5, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user5@gmail.com",
  },
  {
    activityId: "ACT006",
    activityType: "DELETE_ACCOUNT",
    description: "User Account Deleted",
    timestamp: "February 6, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user6@gmail.com",
  },
  {
    activityId: "ACT007",
    activityType: "COMMENT",
    description: "User Commented",
    timestamp: "February 7, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user7@gmail.com",
  },
  {
    activityId: "ACT008",
    activityType: "LIKE",
    description: "User Liked",
    timestamp: "February 8, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user8@gmail.com",
  },
  {
    activityId: "ACT009",
    activityType: "SHARE",
    description: "User Shared",
    timestamp: "February 9, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user9@gmail.com",
  },
  {
    activityId: "ACT010",
    activityType: "UPLOAD",
    description: "User Uploaded",
    timestamp: "February 10, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user10@gmail.com",
  },
  {
    activityId: "ACT011",
    activityType: "READ",
    description: "User Read",
    timestamp: "February 11, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user11@gmail.com",
  },
  {
    activityId: "ACT012",
    activityType: "SEARCH",
    description: "User Searched",
    timestamp: "February 12, 2024 at 10:00:00 AM UTC+5:30",
    userId: "user12@gmail.com",
  },
  {
    activityId: "ACT013",
    activityType: "VIEW_PROFILE",
    description: "User Profile Viewed",
    timestamp: "February 1, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user13@gmail.com",
  },
  {
    activityId: "ACT014",
    activityType: "COMMENT",
    description: "User Commented",
    timestamp: "February 2, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user14@gmail.com",
  },
  {
    activityId: "ACT015",
    activityType: "LIKE",
    description: "User Liked",
    timestamp: "February 3, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user15@gmail.com",
  },
  {
    activityId: "ACT016",
    activityType: "SHARE",
    description: "User Shared",
    timestamp: "February 4, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user16@gmail.com",
  },
  {
    activityId: "ACT017",
    activityType: "UPLOAD",
    description: "User Uploaded",
    timestamp: "February 5, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user17@gmail.com",
  },
  {
    activityId: "ACT018",
    activityType: "READ",
    description: "User Read",
    timestamp: "February 6, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user18@gmail.com",
  },
  {
    activityId: "ACT019",
    activityType: "SEARCH",
    description: "User Searched",
    timestamp: "February 7, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user19@gmail.com",
  },
  {
    activityId: "ACT020",
    activityType: "PURCHASE",
    description: "User Made a Purchase",
    timestamp: "February 8, 2024 at 11:00:00 AM UTC+5:30",
    userId: "user20@gmail.com",
  },
];

export function calculateIncreaseInLastWeek(objectsArray) {
  const now = new Date();
  const lastWeekStart = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
  const lastToLastWeekStart = new Date(
    now.getTime() - 14 * 24 * 60 * 60 * 1000
  );

  const countLastWeek = objectsArray
    ?.filter(
      (obj, index, self) =>
        index === self.findIndex((t) => t.email === obj.email)
    )
    .filter((obj) => {
      const timestampString = convertTimestampToString(obj?.timestamp);
      const timestamp = new Date(timestampString.split(" at ")[0]);
      return timestamp >= lastWeekStart && timestamp <= now;
    }).length;

  const countLastToLastWeek = objectsArray
    ?.filter(
      (obj, index, self) =>
        index === self.findIndex((t) => t.email === obj.email)
    )
    ?.filter((obj) => {
      const timestampString = convertTimestampToString(obj?.timestamp);
      const timestamp = new Date(timestampString.split(" at ")[0]);
      return timestamp >= lastToLastWeekStart && timestamp < lastWeekStart;
    }).length;

  console.log(countLastWeek, countLastToLastWeek);

  if (countLastToLastWeek === 0) {
    return {
      percentageChange: countLastWeek,
      changeStatus: "Increase",
    };
  }

  const increaseCount = countLastWeek - countLastToLastWeek;
  const percentageChange = (
    (increaseCount / countLastToLastWeek) *
    100
  ).toFixed(2);

  let changeStatus = "No change";
  if (increaseCount > 0) {
    changeStatus = "Increase";
  } else if (increaseCount < 0) {
    changeStatus = "Decrease";
  }

  return {
    percentageChange: percentageChange + "%",
    changeStatus: changeStatus,
  };
}
